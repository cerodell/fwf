
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Fire Weather Forecast</title>
    <link rel="stylesheet" href="static/css/leaflet.min.css" />
    <script src="static/js/leaflet-1.7.1.min.js"></script>
    <link rel="stylesheet" href="static/css/leaflet.timedimension.control.css">
    <link rel='stylesheet' href='static/css/leaflet.fullscreen-1.0.1.css'>
    <script src='static/js/Leaflet.fullscreen-1.0.1.min.js'></script>
    <!-- <script src="static/js/plotly-1.58.4.min.js"></script> -->
    <link rel="stylesheet" href="/static/css/fwf-leaflet.zoomhome-0.0.1.min.css"/>
    <link rel="stylesheet" href="/static/css/fwf-map-style-0.0.1.min.css"/>
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <!-- <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style> -->
    <style>#map_fwi{width:100.0%;height:100.0%;left:0.0%;top:0.0%}</style>

    <script src="static/js/d3-3.5.5.min.js"></script>
    <script src="/static/js/fwf-jquery-1.9.1.min.js"></script>
    <script src="/static/js/fwf-jquery-ui-1.10.3.custom.min.js"></script>

    <script src="/static/js/fwf-customsearchbox-0.0.1.min.js"></script>
    <link href="static/css/fwf-searchbox.css" rel="stylesheet" />
    <link href="/static/css/fwf-L.Control.Layers.Tree-0.0.1.min.css" rel="stylesheet" />
    <script src="/static/js/fwf-L.Control.Layers.Tree-0.0.1.min.js"></script>
    <script src="static/js/fwf-leaflet.polygon.gradient.js"></script>
    <link rel="stylesheet" href="static/css/popup.css" />




</head>
<body>

    <script src="static/js/plotly-1.58.4.min.js"></script>
    <script src="static/js/mapbox-gl-1.5.1.js"></script>
    <script src="static/js/leaflet-mapbox-gl.js"></script>
    <link rel="stylesheet" href="/static/css/fwf-mapbox-0.0.1.min.css" />
    <div class="fwi-map" id="map_fwi"></div>
    <!-- <div class="fwi-plot" id="plot_fwi"></div> -->

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="static/js/iso8601.min.js"></script>
    <script type="text/javascript" src="static/js/leaflet.timedimension-1.1.1.min.js"></script>
    <script src="/static/js/fwf-leaflet.zoomhome-0.0.1.min.js"></script>
    <script src="/static/js/fwf-Leaflet.VectorGrid.bundled.min.js"></script>
    <script src="/static/js/fwf-leaflet.groupedlayercontrol-0.0.1.min.js"></script>
    <script src="/static/js/fwf-kdbush-0.0.1.min.js"></script>
    <script src="static/js/rbush.min.js"></script>
    <script src="static/js/moment.min.js"></script>
    <script src="static/js/fwf-time-layer-group.js"></script>
    <script>
        var timeInterval = "2021-02-10T06:00:00Z/2021-02-12T12:00:00Z"
        var tinital = timeInterval.slice(0,20)
        var endtime = timeInterval.slice(21,)
        var now = new Date;
        UTCTimeMap = formatMapDate(now, endtime, tinital);
        UTCTimePlot = formatPlotDate(now, endtime, tinital);

        if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
        var map = L.map(
            "map_fwi",
            {
                center: [56.89589, -107.58885],
                crs: L.CRS.EPSG3857,
                zoomSnap: 0.25,
                zoom: 3.5,
                minZoom: 3,
                maxZoom: 18,
                maxBounds: [
                [-90, 360],
                [90,-360]
                ],
                zoomControl: true,
                preferCanvas: false,
                fullscreenControl: true,
                timeDimension: true,
                timeDimensionOptions: {
                    timeInterval: timeInterval,
                    period: "PT3H",
                    currentTime: Date.parse(UTCTimeMap),
                },
                timeDimensionControl: true,
                timeDimensionControlOptions: {
                    autoPlay: false,
                    playButton: false,
                    speedSlider: false,
                    timeZones: ["UTC", "Local"],
                    playerOptions: {
                        transitionTime: 10,
                    },
                },
            });
        } else{
            var map = L.map(
            "map_fwi",
            {
                center: [56.89589, -107.58885],
                crs: L.CRS.EPSG3857,
                zoomSnap: 0.25,
                zoom: 3.5,
                minZoom: 3,
                maxZoom: 18,
                maxBounds: [
                [-90, 360],
                [90,-360]
                ],
                zoomControl: true,
                preferCanvas: false,
                fullscreenControl: true,
                timeDimension: true,
                timeDimensionOptions: {
                    timeInterval: timeInterval,
                    period: "PT3H",
                    currentTime: Date.parse(UTCTimeMap),
                },
                timeDimensionControl: true,
                timeDimensionControlOptions: {
                    autoPlay: false,
                    playButton: false,
                    speedSlider: false,
                    timeZones: ["UTC", "Local"],
                    playerOptions: {
                        transitionTime: 10,
                    },
                },
                "tap": false ,
            });

        }



        var json_fwf  = 'data/plot/fwf-gk-2021021006-d03.json';
        var ffmc_topo_file = 'data/map/ffmc-merge-2021021006.josn';
        var dmc_topo_file = 'data/map/dmc-merge-20210210.json';
        var dc_topo_file = 'data/map/dc-merge-20210210.json';
        var isi_topo_file = 'data/map/isi-merge-2021021006.json';
        var bui_topo_file = 'data/map/bui-merge-20210210.json';
        var fwi_topo_file = 'data/map/fwi-merge-2021021006.json';
        var wsp_topo_file = 'data/map/ws-merge-2021021006.json';
        var temp_topo_file = 'data/map/temp-merge-2021021006.json';
        var rh_topo_file = 'data/map/rh-merge-2021021006.json';
        var qpf_topo_file = 'data/map/precip-merge-2021021006.json';
        var qpf_3h_topo_file = 'data/map/precip_3h-merge-2021021006.json';
        var snw_topo_file = 'data/map/snw-merge-2021021006.json';

        var wxstations = 'data/wx-2021021006.json';
    </script>
    <script src="/static/js/fwf-basemaps.min.js"></script>
    <script src="static/js/fwf-wxstations-0.0.2.js"></script>
    <script src="static/js/fwf-layer-controler.js"></script>
    <script src="static/js/fwf-colors-manager.js"></script>
    <script src="static/js/fwf-plotly-test.js"></script>


    <!-- Google analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-103958338-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- end Google Analytics -->
  </body>
</html>
