L.Control.Sidebar=L.Control.extend({includes:(L.Evented.prototype||L.Mixin.Events),options:{position:"left"},initialize:function(g,c){var d,f;L.setOptions(this,c);this._sidebar=L.DomUtil.get(g);L.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position);if(L.Browser.touch){L.DomUtil.addClass(this._sidebar,"leaflet-touch")}for(d=this._sidebar.children.length-1;d>=0;d--){f=this._sidebar.children[d];if(f.tagName=="DIV"&&L.DomUtil.hasClass(f,"sidebar-content")){this._container=f}}this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li");for(d=this._tabitems.length-1;d>=0;d--){this._tabitems[d]._sidebar=this}this._panes=[];this._closeButtons=[];for(d=this._container.children.length-1;d>=0;d--){f=this._container.children[d];if(f.tagName=="DIV"&&L.DomUtil.hasClass(f,"sidebar-pane")){this._panes.push(f);var e=f.querySelectorAll(".sidebar-close");for(var b=0,a=e.length;b<a;b++){this._closeButtons.push(e[b])}}}},addTo:function(c){var a,d;this._map=c;for(a=this._tabitems.length-1;a>=0;a--){d=this._tabitems[a];var b=d.querySelector("a");if(b.hasAttribute("href")&&b.getAttribute("href").slice(0,1)=="#"){L.DomEvent.on(b,"click",L.DomEvent.preventDefault).on(b,"click",this._onClick,d)}}for(a=this._closeButtons.length-1;a>=0;a--){d=this._closeButtons[a];L.DomEvent.on(d,"click",this._onCloseClick,this)}return this},removeFrom:function(a){console.log("removeFrom() has been deprecated, please use remove() instead as support for this function will be ending soon.");this.remove(a)},remove:function(b){var a,c;this._map=null;for(a=this._tabitems.length-1;a>=0;a--){c=this._tabitems[a];L.DomEvent.off(c.querySelector("a"),"click",this._onClick)}for(a=this._closeButtons.length-1;a>=0;a--){c=this._closeButtons[a];L.DomEvent.off(c,"click",this._onCloseClick,this)}return this},open:function(c){var a,b;for(a=this._panes.length-1;a>=0;a--){b=this._panes[a];if(b.id==c){L.DomUtil.addClass(b,"active")}else{if(L.DomUtil.hasClass(b,"active")){L.DomUtil.removeClass(b,"active")}}}for(a=this._tabitems.length-1;a>=0;a--){b=this._tabitems[a];if(b.querySelector("a").hash=="#"+c){L.DomUtil.addClass(b,"active")}else{if(L.DomUtil.hasClass(b,"active")){L.DomUtil.removeClass(b,"active")}}}this.fire("content",{id:c});if(L.DomUtil.hasClass(this._sidebar,"collapsed")){this.fire("opening");L.DomUtil.removeClass(this._sidebar,"collapsed")}return this},close:function(){for(var a=this._tabitems.length-1;a>=0;a--){var b=this._tabitems[a];if(L.DomUtil.hasClass(b,"active")){L.DomUtil.removeClass(b,"active")}}if(!L.DomUtil.hasClass(this._sidebar,"collapsed")){this.fire("closing");L.DomUtil.addClass(this._sidebar,"collapsed")}return this},_onClick:function(){if(L.DomUtil.hasClass(this,"active")){this._sidebar.close()}else{if(!L.DomUtil.hasClass(this,"disabled")){this._sidebar.open(this.querySelector("a").hash.slice(1))}}},_onCloseClick:function(){this.close()}});L.control.sidebar=function(b,a){return new L.Control.Sidebar(b,a)};
