(function(f){var b={MIN_FRAME_DURATION:50,MAX_FRAME_DURATION:700,FRAME_DURATION_INCREMENT:50,defaultTZ:"UTC",currentTZ:"UTC",currentTZName:"UTC"};var a=["UTC","Canada/Pacific","Canada/Mountain","Canada/Central","Canada/Eastern","Canada/Atlantic","Canada/Newfoundland"];var e=function(j){return j<10?"0"+j:j};var d=function(j){paddedDateElements=[j.year(),e(j.month()+1),e(j.date())];return paddedDateElements.join("-")+" "+e(j.hour())+":"+e(j.minute())};var c=function(){var j=[];for(i in a){j.push(moment(new Date()).tz(a[i]).zoneAbbr())}b.tzOptions=j;var k="";for(i in j){k+="<option "+(b.currentTZ===a[i]?'selected="selected"':"")+' value="'+moment.tz.zone(a[i]).name+'">'+b.tzOptions[i]+"</option>"}f("#timezone-options").html(k)};var h=function(){b.currentTZ=b.defaultTZ;if(typeof(Storage)!=="undefined"){if(localStorage.getItem("timeZone")!==null){b.currentTZ=localStorage.getItem("timeZone")}}};var g=function(){if(typeof(Storage)!=="undefined"){localStorage.setItem("timeZone",b.currentTZ)}};f.fn.slideshow=function(j){var k=[].concat.apply([],arguments).slice(1);return this.each(function(){if(j==="jump2Image"){var m=k[0];var n=f(this).data("imgPaths");var l=f(this).data("firstImg");l.attr("src",n[m])}else{var n=[];f(this).find("img").each(function(){n.push(this.src)});f(this).data("imgPaths",n);f(this).data("firstImg",f(this).find("img").first());f(this).find(".progress-bar").attr({"aria-valuemax":n.length,"aria-valuemin":0,"aria-valuenow":n.length});var o=function(q){f(this).find(".loading-indicator").remove();f(this).trigger("loaded")}.bind(this);var p=function(r,s){var q=(r/s)*100;f(this).find(".progress-bar").removeClass("active").removeClass("progress-bar-striped").css("width",q+"%").attr("aria-valuenow",r)}.bind(this);setTimeout(function(){preloadImages(n,o,p)},0);return this}})};f.fn.multiSlideshow=function(){return this.each(function(){var k=0;var n=false;var v=true;var m=300;var u=[];var D=null;var F=null;var A=null;var o=f(this).find(".slideshow").slideshow();o.first().find("img").each(function(){u.push(f(this).data("date"))});var w=u.length;h();c();var l="/"+w;f("#ssRangeSlider").attr({value:k,type:"range",min:0,max:w-1,step:1,title:(k+1)+l});f("#firstImage").on("click",function(){if(n){p()}q()});f("#prevImage").on("click",function(){if(n){p()}z()});f("#togglePlay").on("click",function(){if(n){p()}else{C()}});f("#nextImage").on("click",function(){if(n){p()}B()});f("#lastImage").on("click",function(){if(n){p()}j()});f("#increaseSpeed").on("click",function(){y(-b.FRAME_DURATION_INCREMENT)});f("#decreaseSpeed").on("click",function(){y(b.FRAME_DURATION_INCREMENT)});f("#loop-continuous").on("click",function(){if(f(this).hasClass("active")){f(this).removeClass("btn-primary").addClass("btn-default");f(this).attr("aria-pressed","false");v=false}else{f(this).removeClass("btn-default").addClass("btn-primary");f(this).attr("aria-pressed","true");v=true}});f("#timezone-options").on("change",function(){var G=f(this).val();if(G!=b.currentTZ){b.currentTZ=G}A=A.tz(b.currentTZ);f("#currenttime").html(d(A));g()});f("#ssRangeSlider").on("input",function(){if(n){p()}x(parseInt(f(this).val(),10))});var x=function(G){k=G;o.slideshow("jump2Image",G);s(G);f("#ssRangeSlider").prop("value",G);f("#ssRangeSlider").prop("title",(G+1)+l);D=Date.now()};var E=0;o.on("loaded",function(){E++;if(E==o.length){f("html").addClass("imagesLoaded");f("#slideshow-controls button").prop("disabled",false);f("#ssRangeSlider").prop("disabled",false);q();C()}});var p=function(){n=false;f("#togglePlay span").removeClass("glyphicon-pause").addClass("glyphicon-play");f("#togglePlay").attr("title","Play");if(F!=null){clearTimeout(F);F=null}};var C=function(){if(!n&&k===w-1){q()}n=true;f("#togglePlay span").removeClass("glyphicon-play").addClass("glyphicon-pause");f("#togglePlay").attr("title","Pause");F=setTimeout(r,m)};var r=function(){if(k===w-2&&v){t=3*m}else{t=m}if(k===w-1){if(v){x(0)}else{p();return}}else{B()}F=setTimeout(r,t)};var B=function(){if(k===w-1){x(0)}else{x(k+1)}};var z=function(){if(k===0){x(w-1)}else{x(k-1)}};var q=function(){x(0)};var j=function(){x(w-1)};var s=function(H){var G=moment.tz(parseInt(u[H],10),b.defaultTZ);if(b.currentTZ!=b.defaultTZ){datetimeAware=G.tz(b.currentTZ)}else{datetimeAware=G}A=datetimeAware;formattedDateString=d(datetimeAware);f("#currenttime").html(formattedDateString)};var y=function(H){m+=H;if(m>b.MAX_FRAME_DURATION){m=b.MAX_FRAME_DURATION;f("#decreaseSpeed").prop("disabled",true)}else{if(m<b.MIN_FRAME_DURATION){m=b.MIN_FRAME_DURATION;f("#increaseSpeed").prop("disabled",true)}else{if(f("#play-mode-controls div:first-child button").is(":disabled")){f("#play-mode-controls div:first-child button").prop("disabled",false)}}}if(n){clearTimeout(F);F=null;var G=Date.now()-D;if(G>=m){r()}else{F=setTimeout(r,m-G)}}}})};f(document).ready(function(){f(".master").multiSlideshow()})})(jQuery);function preloadImages(f,h,g){var a=[];var b=0;f=Object.prototype.toString.call(f)==="[object Array]"?f:[f];var d=function(){b++;this.onabort=this.onerror=this.onload=null;if(g){g(b,f.length)}if(h&&b===f.length){h(a)}};var e;for(var c=0;c<f.length;c++){e=a[c]=new Image();e.onabort=e.onerror=e.onload=d;e.src=f[c];if(e.complete){e.onabort=e.onerror=e.onload=null;d.call(e)}}};
